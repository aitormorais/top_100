{% extends "base.html" %}

{% block contenido %}
{% load static %}
{% load i18n %}
<main>

  <div class="title plb-20">
    {% get_current_language as LANGUAGE_CODE %}
    <h1><strong>Top 100 de canciones</strong></h1>
    <h2>{{LANGUAGE_CODE}}</h2>
    <h2>{{title}}</h2>
    <form action="{% url 'set_language' %}" method="post">{% csrf_token %}
    <input type="hidden" name="next" value="{{redirect_to}}">
      <select name = "language" id="">
        {% get_available_languages as LANGUAGES%}
        {% get_language_info_list for LANGUAGES as languages %}
        {% for language in languages %}
          <option value="{{language.code}}" {% if language.code == LANGUAGE_CODE %} selected {% endif %}>
            {{language.name_local }}({{ language.code}})
          </option>
        {% endfor %}
      </select>
      <input type="submit" value="Go">
    </form>
    <h3>Dos por genero y ordenadas por veces escuchadas</h3>
  </div>
  </div>
  <div class=" container-flex">
    <table class="table table-dark">
      <tr>
        <th></th>
        <th>{% trans "Nombre" %}</th>
        <th>{% trans "Estilo" %}</th>
        <th>{% trans "Artista"%}</th>
      </tr>
      {% for c in canciones %}
      {% for cc in c %}
      <tr>
        <td><a id="{{cc.nombre}}" url="{{cc.caratula.url}}" onclick="PlayPause(this.id)" href="javascript:void(0)"><i
              id="{{cc.nombre}}Icon" class="far fa-play-circle"></i></a></td>
        <!-- Utilizar js para hacer play a la canciÃ³n seleccionada -->
        <audio id="{{cc.nombre}}audioPlayer" preload="none">
          <source src="{{cc.mp3.url}}" type="audio/mpeg">
        </audio>
        <td id="{{cc.nombre}}NameLabel">{{cc.nombre}}</td>
        <td>{{cc.estilo.nombre}}</td>
        <td>{{cc.artista.nombre}}</td>
      </tr>
      {% endfor %}
      {% endfor %}
    </table>
  </div>
  <div class="container-flex">
    <div class="title plb-20">
      <h1><strong>{% trans "Generos" %}</strong></h1>
    </div>
  </div>
  <div class="container-flex text-center">
    {% for g in generos %}
    <div class="music-card">
      <a href="/genero/{{g.nombre}}"><img src="{{g.caratula.url}}" alt=""></a>
      <a href="/genero/{{g.nombre}}">
        <p>{{g.nombre}}</p>
      </a>
    </div>
    {% endfor %}
  </div>
  <div class="container-flex">
    <div class="title plb-20">
      <h1><strong>{% trans "Artistas" %}</strong></h1>
    </div>
  </div>
  <div class="container-flex text-center">
    {% for a in artistas %}
    <div class="music-card">
      <a href="/artista/{{a.nombre}}"><img src="{{a.imagen.url}}" alt=""></a>
      <a href="/artista/{{a.nombre}}">
        <p>{{a.nombre}}</p>
      </a>
    </div>
    {% endfor %}
  </div>
</main>
{% endblock %}